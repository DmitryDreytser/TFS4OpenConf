
Скрипты для работы с метаданными.

metadata.pl       - Пример применения методов из MetadataWorks.pm.
unique_ids.pl     - Делает числовые идентификаторы объектов уникальными. 
                    Проверяет уникальность текстовых идентификаторов, и сообщает о неуникальных.
unique_ids.bat    - Пример вызова unique_ids.pl и проверки статуса возврата
unique_new_ids.pl - Скрипт для автоматического разрешения конфликтов при одновременном добавлении 
                    метаданных в CVS.
                    Сравнивает текущий файл ОбъектыМетаданных.txt с содержимым CVS, и если
                    находит в файле идентификаторы, которые уже использованы, то заменяет их на новые (уникальные).
                    Если были замены, то, естественно, требуется скомпилировать МДшник, и загрузить
                    его в базу разработчика. При этом тестовые объекты в БД могут потеряться.
sort_objects.pl   - Сортировка файла ОбъектыМетаданных.txt по числовым или текстовым идентификаторам.


###############################################################################################################
MetadataWorks.pm - модуль (package) с базовыми функциями для работы с метаданными.
Методы модуля:
	Start($)
		Метод должен быть вызван перед вызовом любых других функций
		Параметры:
			$dir - каталог с разобранным МДшником

	Stop()
		Метод должен быть вызван после всех изменений в метаданных. При этом будут записаны изменения в служебных файлах.

	FindByID($)
		Поиск объекта по числовому ID
		Параметры:
			$id - числовой ID
		Возвращаемое значение: номер в массиве @IDs или -1

	FindBySID($)
		Поиск объекта по текстовому ID
		Параметры:
			$sid - полный текстовый ID. Например Справочник.Контрагенты.ПолноеНаименование
		Возвращаемое значение: номер в массиве @IDs или -1

	MakeIDsUnique()
		Проверяет числовые идентификаторы на предмет уникальности и в случае необходимости уникализирует их.
		Возвращаемое значение: число изменённых идентификаторов.

	SortObjectsByNumericIDs()
		Сортирует объекты (файл ОбъектыМетаданных.txt) по числовому идентификатору.

	SortObjectsByTextualIDs()
		Сортирует объекты (файл ОбъектыМетаданных.txt) по текстовому идентификатору.

	AddRefField($$$)
		Функция добавляет поле в справочник
		Параметры:
			$FileName - mdp-файл, куда нужно добавить поле
			$QualifiedFieldName - полное имя поля. Например Справочник.Контрагенты.Комментарий
			$FieldText - текст с описанием поля, который будет добавлен в файл метаданных
		Возвращаемое значение: ID нового объекта если поле добавлено, 0 - в противном случае

	AddDocHeadField($$$)
		Функция добавляет поле в шапку документа. Параметры аналогичны AddRefField()

	AddDocTableField($$$)
		Функция добавляет поле в табличную часть  документа. Параметры аналогичны AddRefField()

	SetFieldAttr($$$$)
		Функция для изменения значения атрибута поля.
		Параметры:
			$fname - имя файла с метаданными
			$FieldName - имя поля
			$AttrName - имя атрибута поля
			$AttrNewVal - новое значение атрибута
		Возвращаемое значение: 1 - если значение было изменено, 0 - в противном случае
		
	DelField($$)
	Функция для удаления поля из объекта метаданных.
	Параметры:
		$FileName - имя mdp-файла
		$FieldName - имя поля.
	Возвращаемое значение: 1 - поле удалено, 0 - нет
###############################################################################################################

